### 数据库课程：

```
常见数据库
    Access数据库：小巧方便，适用于小型企业和较小的业务。
    MSSQL数据库：微软开发，安装Windows server上，适用于中大型企业，不支持跨平台
    MYSQL数据库：轻量级开源数据库，适用于中小型企业，性能较好
    Oracle数据库：收费，适用于大型企业，跨平台，需要良好硬件配置作为支撑。

常见框架组合	
	access+asp
	mssql+asp/aspx
	mysql+php
	oracle+java
	
数据库模型
	关系型数据库：(结构化数据库) mssql/mysql/oracle/db2等等
	非关系型数据库:（非结构化数据库）redis/mongodb/hbase/nosql/postgresql等等

mysql的环境变量配置

Dos页面登录mysql
	mysql -u root -p
	
管理mysql数据库的方式
	dos-mysql
	phpmyadmin
	mysql-front开源数据库管理平台
	navicat

mysql--->3306
mssql--->1433

表中有几个字段就有几列数据
一行数据成为记录

mysql基础命令
	mysql -uroot -proot 终端登录数据库
	show databases;查看所有数据库；
	use database_name; //选择一个数据库
	show tables;//显示所有数据表
	select * from users;//从users数据表中查看所有的数据内容（字段名+数据内容）
        select 查看
        * 表示所有的字段
        from users
	mysql数据库账号信息存储在mysql表里
	创建数据库
		create database 数据库名；
		drop database 数据库名； 
	创建表
		先use 数据库名；
		create table 表名 （字段名1 int(长度) primiay key，字段名2 数据类型(长度)，） ；  //创		建表并带主键
		show create table 表名；  //查看表中字段；
		desc 表名；  //查看表中字段
		后续添加助键  
		alert table 表名 add primary key(字段)
	删除表
		drop table 表名；
	插入数据：
		insert into 表名（字段名1，字段名2，字段名3） valu（值1，值2，值3）；
	查询数据：
		*,host,user 可以使用
		select 字段名1,字段名2 from 表名 where 字段名=指定的值（条件）
		select * from user where name=root;
		select * from user where name=root limit 2; //限制前两个输出
	更新数据：
		update 表名 set 字段名=新值 where 字段名=旧值；
	删除数据：
		delete from 表名；
	删除字段
		alter table 表名 drop 删除字段名，以及其数据内容
	添加字段
    	alter table 表名 add 字段名 字段类型；
    修改字段类型
    	alter table 表名 modify 字段名 新字段类型；
    修改表名
    	alter table 原表名 rename to 新表名；
	like
		select * from user where 字段名 like "关键词"
		% 任意多个字符    where name like %ic%
		_ 单个字符  where name like i_c
	union 联合查询
		查询语句1 union 查询语句2 将他们查询的结果放在一张表中显示，表名他们的字段个数必须是一样的
	order by 条件
		默认情况下表的排序是升序。
		升序 order by asc
		降序 order by desc
		order by n; //表示对第n列数据进行排序，如果n超过表所在列数，则报错
		根据条件排序，
	
修改密码
	低版本（5.x）
        知道密码情况下
        update user set password=password('123.com') where user='root'
        忘记密码情况下
        1、关闭mysql服务 /etc/init.d/mysqld stop    systemctl mysqld.service stop
        service mysqld stop
        2、修改配置文件  /etc/mysql/my.ini
        [mysqld]下添加如下：skip-grant-tables
        3、修改文件
        mysql -uroot -p
        use mysql
        update user set password=password("root") where user ="root";
        4、修改文件
        将文件修改回来
        
	高版本
	在mysql系统之外去修改
		mysqladmin - root -p password "新密码"   //接着需要输入原来的密码
	
mysql函数
	select version(); 查看数据版本
	select @@version; 查看版本
	select user(); 查看当前用户
	select @@hostname;查看计算机名称
	select @@tmodir;查看临时目录
	select @@basedir(); 查看数据库所在位置
	select @@datadir();数据存在位置

    .frm 存放表头        //表结构
    .MYD 存储数据        //存储数据内容
    .MYI 存储当前数据配置 //索引信息
    
    mid() 用来截取字符串 mid("被街区字符串"，开始索引从1开始，被截取长度)
	ord() 显示字符的ASCII码   //直截取第一个字符
	concat() 拼接字符串
	concat_ws() 拼接多个字符串，第一个参数是分隔符，可以是字符串，也可以是16进制数字
	group_concat与concat()用法相似，拼接并且分组显示
	sleep();
	select distinct 字段名 from 表名 where 条件；  //去重
数据库数据类型
	int
	float
	BIGINT 大整型
	DATE
	TIME
	CHAR
	CARCHAR  变长字符 //
	TEXT 文本
	timestamp 时间戳
	double   //双精度浮点型
	bit   //比特
	tinyint  //布尔
	
数据库添加用户并授权：
	添加用户：
		create user 用户名@主机ip identified by "密码“；
		主机ip(localhost本机   %任意远程用户  或者自定义ip)
	授权：
		grant 权限 on 数据库名.表名 to 用户名@主机ip
		权限：增（insert）删(drop)改（update）查(select) 或者所有权限all
		grant all on *.* to "test@192.168.11.45";
	数据库外连：
		update user set host="%" where host="localhost";
		flush privileges;

数据的导入和导出
	导入数据（）
		需要创建一个数据库class
		创建一个表，与导入表结构一致。
		1、mysql -u 账号 -p 密码 < example.sql //要导入的数据库文件
		注意： example.sql文件会自动创建数据库，并且需要选择数据库
		
		通过example.sql不会自动创建数据库，使用如下方式
		出现no database selected
		mysql -u账号 -p密码
		create database 数据库名
		use 数据库名
		source 数据库名   //使用绝对路径
		
		2、mysqlimport -uroot -p --local 数据库名 dump.txt
		该方式适用于dump.txt不会自动创建数据库
	
	导出数据：
		mysqldump -uroot -proot test > ./data,sql   导出某个数据库
		mysqldump -uroot -proot test 表名> ./data,sql   导出某个数据库某个表
		
		select * from 表名 into outfile "路径\\文件名";
		首次通过数据库往外导出文件会出现 数据库运行secure_file_priv安全机制来限制我们导出文件。
		
		show global variables like '%secure_file_priv%';
		secure_file_priv 为NULL 表示限制mysqld不允许导入和导出
		secure_file_priv=/tmp/ 表示显示mysqld只能在/tmp/目录下执行导入和导出，其他目录不行
		secure_file_priv 没有值，表示不限制mysqld在任意目录的导入导出
		
		修改方式
			临时方式：set global secure_file_priv = '';
			长久方式：修改配置文件mysql.ini，添加secure_file_priv= ，保存文件，重启服务
			
通过phpmyadmin获取服务器权限（getshell）
	1、通过google hacking查找
		inurl:phpmyadmin
	2、弱口令登录
	show global variables like '%secure_file_priv%';
	3、写入一句话
	select "<?php 这里是一句话?>" into outfile "/var/www/html/index.php"

报错函数
	通过报错信息将我们的数据（用户信息、服务器信息等等）带出来
	函数：
		select connection_id(); 用户当前连接数
		select insert(被替换的字符串，替换开始索引，替换字符长度，替换的字符串);  //做替换
		select left(被截取的字符串，长度); 向左截取
		select right();向右截取
		select substing() /substr()/mind()
		都是三个参数，第一个：被截取的字符串，第二个：开始位置，第三个;截取长度
		
	报错函数2，一般写在条件中
        extractvalue(XML_document,XPath_String);
        第一个参数：XML_document是string类型，它是XML文档对象的名称
        第二个参数：Xpath_String(Xpath格式的字符串)
        作用：从目标XML中返回包含所有查询值的字符串
		select * from news where tid=1 and extractvalue(1,concat(0x7e,(select version()),0x7e));    //通过报错信息，爆出数据库版本  //0x7e 16进制
	
	updatexml(XML_document,Xpath_String,new_value);
        第一个参数：XML_document string格式，它是XML文档对象的名称
        第二个参数：Xpath_String（Xpath格式的字符串）
        第三个参数：new_value，string格式，替换查找道德符合条件的数据
        作用：改变文档中符合条件节点的值
		select * from news where tid=1 and updatexml(1,concat(0x7e,（select user()）,0x7e),1);
	
	
	
	
	
	
	
	
	
	
	
	
	
	









```

